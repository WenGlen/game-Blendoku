<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- 視需要關閉縮放（某些瀏覽器仍可雙指放大，取決於需求） -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>色獨 v8 </title>
  <link rel="stylesheet" href="css/Blendokubase.css">
  <link rel="icon" href="img/BlendokuLogo.png" type="image/x-icon">

</head>

<body class="body">
  
  <div class="wrap">
    <!-- Start Screen -->
    <div id="main-menu">
      <img src="img/BlendokuLogo.png" alt="">
      <h1 class="game-title">色獨</h1>

      <!-- 主動作列 -->
      <div class="menu-actions">
        <button id="btn-tutorial" class="btn primary">玩法教學</button>
        <button class="btn primary" data-level="0">開始遊戲 (Lv1)</button>
      </div>

      <!-- 固定 10 顆關卡按鈕 -->
      <div id="level-grid" class="level-grid">
        <button class="level-btn" data-level="1">Lv2</button>
        <button class="level-btn" data-level="2">Lv3</button>
        <button class="level-btn" data-level="3">Lv4</button>
        <button class="level-btn" data-level="4">Lv5</button>
        <button class="level-btn" data-level="5">Lv6</button>
        <button class="level-btn" data-level="6">Lv7</button>
        <button class="level-btn" data-level="7">Lv8</button>
        <button class="level-btn" data-level="8">Lv9</button>
        <button class="level-btn" data-level="9">Lv10</button>
      </div>
    </div>


    <!-- Tutorial Overlay -->
    <div id="tutorial" class="overlay hidden" aria-hidden="true" role="dialog">
      <div class="tutorial-card">
        <div class="tutorial-header">
          <h2 id="tutorial-title">遊戲教學</h2>
          <button class="icon-btn" id="tutorial-close" aria-label="關閉教學">✕</button>
        </div>

        <div class="tutorial-body">
          <!-- Step 1 -->
          <section class="t-step active" data-step="0">
            <h3>目標：將每一條直線上的色塊都排成漸層</h3>
            <div class="demo-panel">
              <div class="demo-gradients">
                <div class="grid">
                  <div class="cell"><div class="tile color1"></div></div>
                  <div class="cell"><div class="tile color2"></div></div>
                  <div class="cell"><div class="tile color3"></div></div>
                  <div class="cell"><div class="tile color4"></div></div>
                </div>
                <div class="grid">
                  <div class="cell"><div class="tile color5"></div></div>
                  <div class="cell"><div class="tile color6"></div></div>
                  <div class="cell"><div class="tile color7"></div></div>
                  <div class="cell"><div class="tile color8"></div></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Step 2 -->
          <section class="t-step" data-step="1">
            <h3>長按可拿起色塊</h3>
            <h3>但上鎖的色塊無法被拿起</h3>
            <div class="demo-panel">
              <div class="grid pick-scene">
                <div class="cell "><div class="tile pick-t1"></div></div>
                <div class="cell mid"><div class="tile pick-t2"></div></div>
                <div class="cell fixed"><div class="tile pick-t3 "></div></div>

                <!-- 游標：兩張圖用 display 切換 -->
                <img class="cursor-hand idle"     src="img/hand-cursor-canDrag.png"  alt="">
                <img class="cursor-hand grabbing" src="img/hand-cursor-draging.png"  alt="">
              </div>
            </div>

          </section>

          <!-- Step 3 -->
          <section class="t-step" data-step="2">
            <h3>被拿起的色塊可直接放至空格中</h3>
            <h3>若該處已有色塊則會交換位置</h3>
            <div class="demo-panel">
              <div class="demo demo-step3">
                <div class="grid swap-scene">
                  <!-- 1 行 4 格 -->
                  <div class="cell"><div class="tile tile-a"></div></div>
                  <div class="cell"></div>
                  <div class="cell"></div>
                  <div class="cell"><div class="tile tile-b"></div></div>

                  <!-- 游標：兩張圖用 display 切換 -->
                  <img class="cursor-hand idle"     src="img/hand-cursor-canDrag.png"  alt="">
                  <img class="cursor-hand grabbing" src="img/hand-cursor-draging.png"  alt="">
                </div>
              </div>
            </div>

          </section>

          <!-- Step 4 -->
          
          <section class="t-step" data-step="3">
            <h3>全部排放正確後</h3>
            <h3>會自動跳出過關彈窗</h3>

            <div class="demo-panel">
              <div class="demo demo-step4">
                <div class="grid finish-scene">
                  <!-- 浮動中的最後一顆 / 游標：原本在這裡（容器層級） -->
                  <div class="grid finish-scene">
                    <div class="cell"><div class="tile tile-a"></div></div>
                    <div class="cell cell-2"></div>
                    <div class="cell"><div class="tile tile-c"></div></div>
                    <div class="cell"><div class="tile tile-d"></div></div>
                  
                    <!-- ✅ 改到 grid 裡面，定位基準 = grid 左上角 -->
                    <div class="tile tile-b floating"></div>
                    <img class="cursor-hand idle"     src="img/hand-cursor-canDrag.png"  alt="">
                    <img class="cursor-hand grabbing" src="img/hand-cursor-draging.png"  alt="">
                  </div>
              </div>
            </div>

            <!-- 教學中的假彈窗（CSS 動畫出現/隱藏） -->
            <div class="tutorial-fake-popup">🎉　完成！　🎉</div>
          </section>


        </div>
        <div class="tutorial-footer">
          <div class="dots" id="tutorial-dots"></div>
          <div class="actions">
            <button class="btn ghost" id="btn-prev" disabled>上一頁</button>
            <button class="btn primary" id="btn-next">下一頁</button>
          </div>
        </div>
      </div>
    </div>



    
    <div class="header">

      <div class="logo">
        <img src="img/BlendokuLogo.png" alt="">
      </div>

      <h3 class="levelNum">Lv 1</h3>

      <button id="btn-main-menu" class="icon-btn2" ><img class="homeIcon" src="img/home.png" alt=""></button>

    </div>

    <div class="panel">
      
      <!-- 作答區 -->
      <div id="board" class="grid-board"></div>

      <div class="gap-line"></div>

      <!-- 起始色塊區 -->
      <div id="start-area" class="start-board"></div>

      <div class="gap-space"></div>

      <!-- 記分區 -->
      <div class="info-bar">
        <div class="switch-bar">
          <button id="btn-prev-level" class="icon-btn3" ><img src="img/previous.png" alt=""></button>
          <button id="btn-retry-level" class="icon-btn3" onclick="restartGame()" ><img src="img/reload.png" alt=""></button>
          <button id="btn-next-level" class="icon-btn3" ><img src="img/next.png" alt=""></button>
        </div>
        <div class="count-bar">
          <span>步數：<span id="step-count" class="counter">0</span> 步</span>
          <span>時間：<span id="timer" class="counter">0.0</span> 秒</span>
        </div>
      </div>

      <!-- 彈窗 --> 
      <div id="win-popup" class="popup hidden">

        <div class="popup-content">
          <div class="popup-header">
            <button class="icon-btn" id="popup-close" aria-label="關閉彈窗">✕</button>
          </div>
          <h3>🎉　　過關！　　🎉</h3>
          <div class="popup-content pass-record">
            <p>移動：<span id="popup-step">0</span></p>
            <p>時間：<span id="popup-time">0.0</span> 秒</p>
          </div>
          <div>
            <button onclick="restartGame()">再次挑戰</button>
            <button onclick="nextLevel()">下一關</button>
          </div>
        </div>

      </div>
      
    </div>

    <footer class="footer">
      <p>製作者: Glen　　版本: v11.1</p>
      <p>玩法機制參考: Blendoku2</p>
    </footer>
  </div>

  <div id="game-wrap">
    <div id="game-stage"><!-- 你的遊戲 DOM/Canvas --></div>
  </div>

  <!-- js -->
  <script src="level.js"></script>
  <script src="Blendoku.js"></script>
  
</body>
</html>
